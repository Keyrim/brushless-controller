/*
 * SPDX-FileCopyrightText: 2024 Th√©o Magne <theo.magne.fr@gmail.com>
 *
 * SPDX-License-Identifier: MIT
 */

/******************************************************************************
 * Includes
 ******************************************************************************/

#include "stm32f3xx_hal.h"
#define TAG "bsp_adc"

#include <stdint.h>

#include "adc.h"
#include "log.h"
#include "stm32f3xx_hal_adc.h"

#include "bsp_adc.h"

/******************************************************************************
 * PRIVATE Configuration
 ******************************************************************************/

/******************************************************************************
 * PRIVATE Macro
 ******************************************************************************/

/******************************************************************************
 * PRIVATE type definitions
 ******************************************************************************/

/******************************************************************************
 * PRIVATE function prototypes
 ******************************************************************************/

/******************************************************************************
 * PRIVATE constant data definitions
 ******************************************************************************/

/******************************************************************************
 * PRIVATE variable definitions
 ******************************************************************************/

/******************************************************************************
 * PUBLIC implicit variable definitions (e.g. when no .h file)
 ******************************************************************************/

/******************************************************************************
 * PRIVATE Callback function
 ******************************************************************************/

/******************************************************************************
 * PRIVATE function
 ******************************************************************************/

/******************************************************************************
 * PUBLIC Callback function
 ******************************************************************************/

/******************************************************************************
 * PUBLIC function
 ******************************************************************************/

void bsp_adc_init(void) {
    logi("init ...");
}

void bsp_adc_start_recording(uint16_t *out) {
    HAL_ADC_Start_DMA(&hadc1, (uint32_t *)out, BSP_ADC_CHANN_MAX);
}
